<!DOCTYPE html>
<html>
  <head>
    <title>MegaPhone Concept</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/base.css' />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=0.01,maximum-scale=4,user-scalable=yes">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="/javascripts/api.js"></script>
    <script type="text/javascript" src="/javascripts/bubbleInfo.js"></script>
    <script type="text/javascript" src="/javascripts/bubbleManager.js"></script>
    <script type="text/javascript" src="/javascripts/chatManager.js"></script>
<script>
$(function(){
    document.socket = io.connect('http://api.m-ph.org:3000');
    bubbleManager = $('#canvas').bubbleManager({
        max: 100,
        button: '#button',
	idForm: '#idForm',
	magForm: '#magForm',
	colorForm: '#colForm'
    });

    var chatManager = $('#buttons').chatManager({
	box : '#presetBox',
	labels: [ 'チャンス!', 'やったー', 'ナイス!!' ]
    });

    document.socket.on('push swings', function (json) {
	var obj = JSON.parse(json);
	for( var id in obj.swings ){
	    var swinginfo = obj.swings[id];
	    if( swinginfo.mag > 1 ){
		$('#canvas').bubbleManager.addBubble( id, swinginfo.mag, '#'+swinginfo.color);
	    }
	}
    });

});
</script>
</head>
  <body>
    <button id="swing">応援</button><br />
    <div id="swing0_wrapper"><div id="swing0_meter"></div><div id="swing0_number">my swing</div></div>
    <div id="swing1_wrapper"><div id="swing1_meter"></div><div id="swing1_number">total swing</div></div>
    <div>
    chat : <input type="text" name="message" id="message" /><button id="btn">送信</button>
    <div id='presetBox'></div>
    <div id="msglist"></div>
    </div>
    <div id="canvas"></div>
  </body>
</html>
